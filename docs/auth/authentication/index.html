<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../../images/favicon.png">
        
        <title>User Authentication - Daptin</title>
        <link href="../../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../../css/highlight.css">
        <link href="../../css/theme_extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../../js/jquery-1.10.2.min.js"></script>
        <script src="../../js/bootstrap-3.0.3.min.js"></script>
        <script src="../../js/highlight.pack.js"></script>
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', 'UA-114227400-1', 'docs.dapt.in');
            ga('send', 'pageview');
        </script>
<script async defer src="https://buttons.github.io/buttons.js"></script>
<!-- Place this tag in your head or just before your close body tag. -->
<link href="https://fonts.googleapis.com/css?family=Varela+Round" rel="stylesheet">

    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../..">Daptin</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../..">Introduction</a>
                    </li>
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentation <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
  <li class="dropdown-submenu">
    <a href="#">Installation</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../setting-up/native/">Native</a>
</li>
            
<li >
    <a href="../../setting-up/heroku/">Heroku</a>
</li>
            
<li >
    <a href="../../setting-up/docker/">Docker</a>
</li>
            
<li >
    <a href="../../setting-up/docker-compose/">Docker Compose</a>
</li>
            
<li >
    <a href="../../setting-up/kubernetes/">Kubernetes</a>
</li>
            
<li >
    <a href="../../setting-up/database_configuration/">Choose your storage</a>
</li>
            
<li >
    <a href="../../setting-up/settingup/">Getting started</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Setup and data</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../setting-up/entities/">Designing data model</a>
</li>
            
<li >
    <a href="../../setting-up/entity_relations/">Linking data with one another</a>
</li>
            
<li >
    <a href="../../setting-up/database_configuration/">Database configuration</a>
</li>
            
<li >
    <a href="../../data-modeling/data_storage/">Data store format</a>
</li>
            
<li >
    <a href="../../setting-up/data_import/">Import data</a>
</li>
            
<li >
    <a href="../../data-modeling/data_validation/">Data validations</a>
</li>
            
<li >
    <a href="../../data-modeling/data_conformation/">Data conformations</a>
</li>
            
<li >
    <a href="../../data-modeling/auditing/">Audit</a>
</li>
            
<li >
    <a href="../../data-modeling/state_tracking/">State tracking</a>
</li>
            
<li >
    <a href="../../extend/data_exchange/">Data exchange and sync</a>
</li>
            
<li >
    <a href="../../streams/streams/">Data streams</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">APIs</a>
    <ul class="dropdown-menu">
            
  <li class="dropdown-submenu">
    <a href="#">CRUD APIs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../apis/read/">Read, search, filter</a>
</li>
            
<li >
    <a href="../../apis/create/">Create</a>
</li>
            
<li >
    <a href="../../apis/update/">Update</a>
</li>
            
<li >
    <a href="../../apis/delete/">Delete</a>
</li>
            
<li >
    <a href="../../apis/relation/">Relations</a>
</li>
            
<li >
    <a href="../../apis/execute/">Execute</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">Action APIs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../actions/actions/">Using actions</a>
</li>
            
<li >
    <a href="../../actions/default_actions/">Actions list</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">User APIs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../actions/signup/">User registration/signup</a>
</li>
            
<li >
    <a href="../../actions/signin/">User login/signin</a>
</li>
    </ul>
  </li>
            
  <li class="dropdown-submenu">
    <a href="#">State tracking APIs</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../state/machines/">State machines</a>
</li>
    </ul>
  </li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Users</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../guests/">Guests</a>
</li>
            
<li >
    <a href="../users/">Adding users</a>
</li>
            
<li >
    <a href="../usergroups/">Usergroups</a>
</li>
            
<li >
    <a href="../permissions/">Data access permission</a>
</li>
            
<li >
    <a href="../social_login/">Social login</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Auth & Auth</a>
    <ul class="dropdown-menu">
            
<li class="active">
    <a href="./">User Authentication</a>
</li>
            
<li >
    <a href="../authorization/">Authorization</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Asset and file storage</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../cloudstore/cloudstore/">Connecting with cloud store</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Sub-sites</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../subsite/subsite/">Creating a subsite</a>
</li>
            
<li >
    <a href="../../subsite/grapes/">Live editing a subsite</a>
</li>
            
<li >
    <a href="../../subsite/basic_auth/">Basic Authentication</a>
</li>
    </ul>
  </li>
                            
  <li class="dropdown-submenu">
    <a href="#">Sharing</a>
    <ul class="dropdown-menu">
            
<li >
    <a href="../../extend/marketplace/">Marketplace</a>
</li>
    </ul>
  </li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../social_login/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../authorization/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/daptin/daptin/edit/master/docs/auth/authentication.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#authentication">Authentication</a></li>
            <li><a href="#authentication-token">Authentication token</a></li>
            <li><a href="#server-side">Server side</a></li>
            <li><a href="#client-side">Client side</a></li>
            <li><a href="#authentication-using-other-systems">Authentication using other systems</a></li>
            <li><a href="#sign-up">Sign Up</a></li>
            <li><a href="#sign-in">Sign In</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="authentication">Authentication<a class="headerlink" href="#authentication" title="Permanent link">Link</a></h1>
<p>Daptin maintains its own user accounts and usergroups as well. Users are identified by <code>email</code> which is a unique key in the <code>user</code> entity. Passwords are stored using bcrypt with a cost of 11. Password field has a column_type <code>password</code> which makes daptin to bcrypt it before storing, and password fields are never returned in any JSONAPI call.</p>
<h2 id="authentication-token">Authentication token<a class="headerlink" href="#authentication-token" title="Permanent link">Link</a></h2>
<p>The authentication token is a JWT token issued by daptin on sign in action. Users can create new actions to allow other means of generating JWT token. It is as simple as adding another outcome to an action.</p>
<h2 id="server-side">Server side<a class="headerlink" href="#server-side" title="Permanent link">Link</a></h2>
<p>Daptin uses oAuth2 based authentication strategy. HTTP calls are checked for <code>Authorization</code> header, and if present, validated as a JWT token. The JWT token should have been issued by daptin earlier and should not have expired. To see how to generate JWT token, checkout the <a href="../../actions/signin/">sing-in action</a>.</p>
<p>The JWT token contains the issuer information (daptin) plus basic user profile (email). The JWT token has a one hour (configurable) expiry from the time of issue.</p>
<p>If the token is absent or invalid, the user is considered as a guest. Guests also have certain permissions. Checkout the <a href="../authorization/">Authorization docs</a> for details.</p>
<h2 id="client-side">Client side<a class="headerlink" href="#client-side" title="Permanent link">Link</a></h2>
<p>On the client side, for dashboard, the token is stored in local storage. The local storage is cleared on logout or if the server responds with a 401 Unauthorized status.</p>
<h2 id="authentication-using-other-systems">Authentication using other systems<a class="headerlink" href="#authentication-using-other-systems" title="Permanent link">Link</a></h2>
<p>There is planned road map to allow user logins via external oauth2 servers as well (login via google/facebook/twitter... and so on). This feature is not complete yet. Documentation will be updated to reflect changes.</p>
<h2 id="sign-up">Sign Up<a class="headerlink" href="#sign-up" title="Permanent link">Link</a></h2>
<p>Sign up is an action on user entity. Sign up takes four inputs:</p>
<ul>
<li>Name</li>
<li>Email</li>
<li>Password</li>
<li>PasswordConfirm</li>
</ul>
<p>When the user initates a Sign up action, the following things happen</p>
<ul>
<li>Check if guests can initiate sign in action</li>
<li>Check if guests can create a new user (create permission)</li>
<li>Create a new user row</li>
<li>Check if guests can create a new usergroup (create permission)</li>
<li>Create a new usergroup row</li>
<li>Associate the user to the usergroup (refer permission)</li>
</ul>
<p>This means that every user has his own dedicated usergrou by default. </p>
<h2 id="sign-in">Sign In<a class="headerlink" href="#sign-in" title="Permanent link">Link</a></h2>
<p>Sign In is also an action on user entity. Sign in takes two inputs:</p>
<ul>
<li>Email</li>
<li>Password</li>
</ul>
<p>When the user initiates Sign in action, the following things happen:</p>
<ul>
<li>Check if guests can peek users table (Peek permission)</li>
<li>Check if guests can peek the particular user (Peek Permission)</li>
<li>Match if the provided password bcrypted matches the stored bcrypted password</li>
<li>If true, issue a JWT token, which is used for future calls</li>
</ul>
<p>The main outcome of the Sign In action is the jwt token, which is to be used in the <code>Authorization</code> header of following calls.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '../..';</script>
        <script src="../../js/base.js"></script>
        <script src="../../search/require.js"></script>
        <script src="../../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
