<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../../img/favicon.ico">
  <title>Setting up - Daptin</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Setting up";
    var mkdocs_page_input_path = "setting-up/settingup.md";
    var mkdocs_page_url = "/setting-up/settingup/";
  </script>
  
  <script src="../../js/jquery-2.1.1.min.js"></script>
  <script src="../../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href="../.." class="icon icon-home"> Daptin</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="../..">Home</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Setting up</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#setting-up-daptin">Setting up Daptin</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#native-binary">Native binary</a></li>
        
            <li><a class="toctree-l3" href="#docker">Docker</a></li>
        
            <li><a class="toctree-l3" href="#docker-compose">Docker compose</a></li>
        
            <li><a class="toctree-l3" href="#kubernetes">Kubernetes</a></li>
        
            <li><a class="toctree-l3" href="#database-and-data-persistence">Database and data persistence</a></li>
        
            <li><a class="toctree-l3" href="#port">Port</a></li>
        
            <li><a class="toctree-l3" href="#restart">Restart</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../entities/">Entities</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../entity_relations/">Entity relations</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../cloudstore/cloudstore/">Cloud storage</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../subsite/subsite/">Subsites</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../auth/users_and_usergroups/">Users and groups</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../auth/authorization/">Authorization</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../auth/authentication/">Authentication</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../actions-streams/actions/">Actions</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../data-modeling/data_storage/">Data storage</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../marketplace/">Market place</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../data-modeling/auditing/">Data auditing</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../data-modeling/data_validation/">Data validation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../data-modeling/data_conformation/">Data conformations</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../data-modeling/state_tracking/">State tracking</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../actions-streams/streams/">Data streams</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../auth/permissions/">Permission model</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../extend/oauth_connection/">OAuth connections</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../../extend/oauth_token/">OAuth tokens</a>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../..">Daptin</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../..">Docs</a> &raquo;</li>
    
      
    
    <li>Setting up</li>
    <li class="wy-breadcrumbs-aside">
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="setting-up-daptin">Setting up Daptin</h1>
<p>You can setup daptin on any machine/server of your choice.</p>
<h2 id="native-binary">Native binary</h2>
<p>Daptin is available as a native binary. You can fetch the lastest binary from the releases</p>
<p><a href="https://github.com/daptin/daptin/releases">https://github.com/daptin/daptin/releases</a></p>
<p>To start daptin, execute <code>./daptin</code> which will create a local sqlite database and start listening on port 6336. To change the database or port, read below.</p>
<h2 id="docker">Docker</h2>
<p>A docker image is also available which can be deployed on any docker compatible hosting provider (aws, gce, linode, digitalocean, azure)</p>
<p><img src="/images/aws.png" style="width: 200px">
<img src="/images/digitalocean.jpg" style="width: 200px">
<img src="/images/gce.png" style="width: 200px">
<img src="/images/linode.jpg" style="width: 200px">
<img src="/images/azure.jpg" style="width: 200px"></p>
<p><a href="https://hub.docker.com/r/daptin/daptin/">https://hub.docker.com/r/daptin/daptin/</a></p>
<p>To start daptin using docker</p>
<p><code>docker run daptin/daptin</code></p>
<h2 id="docker-compose">Docker compose</h2>
<pre><code class="yaml">version: '3'
services:
    web:
        image: devsupport
        ports:
            - &quot;8090:8080&quot;
        restart: always
        environment:
          DAPTIN_PORT: '8080'
          DAPTIN_DB_TYPE: 'mysql'
          DAPTIN_DB_CONNECTION_STRING: 'dev:dev@tcp(mysqldb:3306)/daptin'
        depends_on:
            - mysqldb
    mysqldb:
        image: mysql
        container_name: ${MYSQL_HOST}
        restart: always
        env_file:
            - &quot;.env&quot;
        environment:
            - MYSQL_DATABASE=${MYSQL_DATABASE}
            - MYSQL_ROOT_PASSWORD=${MYSQL_ROOT_PASSWORD}
            - MYSQL_USER=${MYSQL_USER}
            - MYSQL_PASSWORD=${MYSQL_PASSWORD}
        ports:
            - &quot;8989:3306&quot;
        volumes:
            - &quot;./data/db/mysql:/var/lib/mysql&quot;
</code></pre>

<h2 id="kubernetes">Kubernetes</h2>
<pre><code class="yaml">apiVersion: v1
kind: Service
metadata:
  name: daptin-instance
  labels:
    app: daptin
spec:
  ports:
    - port: 8080
  selector:
    app: daptin
    tier: production
---
apiVersion: extensions/v1beta1
kind: Deployment
metadata:
  name: daptin-daptin
  labels:
    app: daptin
spec:
  strategy:
    type: Recreate
  template:
    metadata:
      labels:
        app: daptin
        tier: testing
    spec:
      containers:
      - image: daptin/daptin:latest
        name: daptin
        args: ['-db_type', 'mysql', '-db_connection_string', 'user:password@tcp(&lt;mysql_service&gt;:3306)/daptin']
        ports:
        - containerPort: 8080
          name: daptin
---
apiVersion: extensions/v1beta1
kind: Ingress
metadata:
  name: daptin-test
spec:
  rules:
  - host: hello.website
    http:
      paths:
      - backend:
          serviceName: daptin-testing
          servicePort: 8080
</code></pre>

<h2 id="database-and-data-persistence">Database and data persistence</h2>
<p>Daptin can use one of the following database for data persistence</p>
<ul>
<li>Mysql</li>
<li>Postgres</li>
<li>SQLite [Default]</li>
</ul>
<p>If nothing specified, a sqlite database is created on the local file system and is used for all purposes. (uploads/blobs are not stored in database)</p>
<p>You can customise the database connection properties when starting daptin</p>
<h3 id="mysql">mysql</h3>
<p>To use mysql, start daptin as follows</p>
<p><code>./daptin -db_type=mysql -db_connection_string='&lt;username&gt;:&lt;password&gt;@tcp(&lt;hostname&gt;:&lt;port&gt;)/&lt;db_name&gt;'</code></p>
<h3 id="postgres">postgres</h3>
<p><code>./daptin -db_type=postgres -db_connection_string='host=&lt;hostname&gt; port=&lt;port&gt; user=&lt;username&gt; password=&lt;password&gt; dbname=&lt;db_name&gt; sslmode=enable/disable'</code></p>
<h3 id="sqlite">sqlite</h3>
<p>By default a "daptin.db" file is created to store data</p>
<p><code>./daptin -db_type=sqlite -db_connection_string=db_file_name.db</code></p>
<h2 id="port">Port</h2>
<p>Daptin will listen on port 6336 by default. You can change it by using the following argument</p>
<p><code>-port=8080</code></p>
<h2 id="restart">Restart</h2>
<p>Daptin relies on self restarts to configure new entities and apis and changes to the other parts of the ststem. As soon as you upload a schema file, daptin will write the file to disk, and restart itself. When it starts it will read the schema file, make appropriate changes to the database and expose JSON apis for the entities and actions.</p>
<p>You can issue a daptin restart from the dashboard. Daptin takes about 15 seconds approx to start up and configure everything.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../entities/" class="btn btn-neutral float-right" title="Entities">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../.." class="btn btn-neutral" title="Home"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../.." style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../entities/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '../..';</script>
    <script src="../../js/theme.js"></script>
      <script src="../../search/require.js"></script>
      <script src="../../search/search.js"></script>

</body>
</html>
